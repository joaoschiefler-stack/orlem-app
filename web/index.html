<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <title>Orlem ‚Äî Assistente de Reuni√µes</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <style>
      :root{
        --bg:#0b0f14;
        --panel:#0f141b;
        --card:#0e1722;
        --card2:#0e1b2a;
        --card3:#0e221b;
        --stroke:#1e2937;
        --stroke-2:#223041;
        --text:#e8f0fe;
        --muted:#9fb2c9;
        --pill:#111827;
        --pill-stroke:#243244;
        --btn:#111827;
        --btn-hover:#16202b;
        --brand:#8b5cf6; /* roxo suave */
        --accent:#4f46e5; /* indigo */
        --ok:#34d399;
        --err:#ef4444;
      }
      *{box-sizing:border-box}
      html,body{height:100%}
      body{
        margin:0;
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
        background: radial-gradient(1200px 700px at 80% -10%, rgba(79,70,229,.18), transparent 60%),
                    radial-gradient(900px 600px at -10% 100%, rgba(139,92,246,.16), transparent 60%), var(--bg);
        color:var(--text);
      }

      /* layout */
      .app{display:flex; height:100vh; gap:0}
      .side{
        width:320px; background:linear-gradient(180deg, rgba(15,20,27,.96), rgba(15,20,27,.88));
        border-right:1px solid var(--stroke); padding:14px; overflow:auto;
        backdrop-filter: blur(6px);
      }
      .brand{display:flex; align-items:center; gap:10px; font-weight:700; letter-spacing:.3px; margin-bottom:6px}
      .brand .dot{width:10px;height:10px;border-radius:50%;background:var(--brand);box-shadow:0 0 18px var(--brand)}
      .side-title{font-size:12px; color:var(--muted); margin:12px 0 6px;}
      .list{display:flex; flex-direction:column; gap:6px}
      .log-item,.meeting-item{
        padding:10px 11px; border-radius:10px; background:var(--card); border:1px solid var(--stroke-2);
        cursor:pointer; transition:.18s ease; font-size:14px;
      }
      .log-item:hover,.meeting-item:hover{transform:translateY(-1px); border-color:var(--accent)}
      .log-item.active,.meeting-item.active{border-color:var(--accent); box-shadow:0 0 0 2px rgba(79,70,229,.18) inset}
      .small{font-size:12px; color:var(--muted)}
      .ghost{opacity:.8}

      .main{flex:1; display:flex; flex-direction:column}
      header{
        display:flex; align-items:center; gap:12px; padding:14px 16px;
        border-bottom:1px solid var(--stroke); background:linear-gradient(180deg, rgba(15,20,27,.95), rgba(15,20,27,.85));
        position:sticky; top:0; z-index:10; backdrop-filter: blur(6px);
      }
      .pill{ padding:6px 12px; border-radius:999px; font-size:12px; background:var(--pill); border:1px solid var(--pill-stroke); color:var(--text); display:flex; align-items:center; gap:8px}
      .pill .dot{width:8px;height:8px;border-radius:50%;background:#f87171}
      .pill.online .dot{background:var(--ok)}
      .toolbar{display:flex; gap:8px; margin-left:auto}
      .btn{
        background:var(--btn); border:1px solid var(--pill-stroke); color:var(--text); padding:10px 12px; border-radius:10px; cursor:pointer;
        display:inline-flex; align-items:center; gap:8px; font-weight:600; transition:.16s ease;
      }
      .btn:hover{background:var(--btn-hover); transform:translateY(-1px)}
      .btn.critical{border-color:#3a1f22; background:#1a0e10}
      .btn.critical:hover{border-color:#7f1d1d; background:#241115}

      .timeline{flex:1; padding:18px; overflow:auto}
      .msg{
        padding:12px 14px; border-radius:12px; margin:10px 0; max-width:900px;
        background:var(--card); border:1px solid var(--stroke);
      }
      .msg.user{ background:var(--card2); border-color:#203043}
      .msg.bot{ background:var(--card3); border-color:#1e3a2f}
      .msg.system{opacity:.85; font-style:italic}

      .composer{ display:flex; gap:10px; padding:14px 16px; border-top:1px solid var(--stroke);
                 background:linear-gradient(180deg, rgba(15,20,27,.90), rgba(15,20,27,.86)); position:sticky; bottom:0; backdrop-filter: blur(6px);}
      textarea{
        flex:1; resize:none; background:#0b1118; color:var(--text); border:1px solid var(--stroke-2);
        border-radius:12px; padding:12px 13px; height:56px; outline:none; font-size:14px;
      }
      textarea:focus{border-color:var(--accent); box-shadow:0 0 0 2px rgba(79,70,229,.18)}
      .mic{ width:48px; height:48px; border-radius:12px; background:var(--btn); border:1px solid var(--pill-stroke);
            display:flex; align-items:center; justify-content:center; cursor:pointer; position:relative}
      .mic.recording{ outline:2px solid var(--err)}
      #mic-dot{ position:absolute; top:6px; right:6px; width:8px; height:8px; border-radius:50%; background:#374151}
      #mic-dot.on{background:var(--err)}
      .send{min-width:96px}
      .muted{color:var(--muted)}
    </style>
  </head>

  <body>
    <div class="app">
      <aside class="side">
        <div class="brand"><span class="dot"></span> ORLEM</div>

        <div class="side-title">REUNI√ïES SALVAS (.JSONL)</div>
        <div id="logs-list" class="list"></div>
        <button id="refresh-logs" class="btn" style="margin-top:10px">‚ü≥ Recarregar logs</button>

        <div class="side-title" style="margin-top:16px">REUNI√ïES (DB)</div>
        <div id="meetings-list" class="list"></div>
        <div class="small ghost" style="margin-top:6px">Clique em qualquer item para abrir</div>
      </aside>

      <section class="main">
        <header>
          <div id="ws-status" class="pill"><span class="dot"></span>desconectado</div>
          <div class="pill" id="current-session">log: ‚Äî</div>

          <div class="toolbar">
            <button id="summarize"   class="btn">üìÑ Resumir</button>
            <button id="save"        class="btn">üíæ Salvar</button>
            <button id="rename"      class="btn">‚úèÔ∏è Renomear log</button>
            <button id="diarize"     class="btn">üßë‚Äçü§ù‚Äçüßë Diarizar</button>
            <button id="export"      class="btn">‚¨áÔ∏è Exportar .jsonl</button>
            <button id="endMeeting"  class="btn critical">üõë Encerrar (resumo)</button>
            <button id="loadMeetings" class="btn">üóÇÔ∏è Reuni√µes (DB)</button>
          </div>
        </header>

        <div id="timeline" class="timeline"></div>

        <div class="composer">
          <button id="micBtn" class="mic" title="Falar"><span id="mic-dot"></span>üéôÔ∏è</button>
          <textarea id="utterance" placeholder="Digite ou fale‚Ä¶"></textarea>
          <button id="sendBtn" class="btn send">Enviar</button>
        </div>
      </section>
    </div>

    <!-- bust de cache: aumente v= quando atualizar -->
    <script src="/web/client.js?v=9"></script>
  </body>
</html>
