<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <title>Orlem ‚Äî Reuni√£o ao vivo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <style>
      :root {
        --bg-main: #020617;
        --bg-elevated: #020718;
        --bg-card: #020617;
        --border-subtle: rgba(148, 163, 184, 0.4);
        --border-strong: rgba(148, 163, 184, 0.7);
        --text-main: #e2e8f0;
        --text-soft: #9ca3af;
        --accent: #22c55e;
        --accent-soft: rgba(34, 197, 94, 0.15);
        --danger: #f97316;
        --radius-lg: 18px;
      }

      * {
        box-sizing: border-box;
      }

      html,
      body {
        margin: 0;
        padding: 0;
        height: 100%;
        background: radial-gradient(120% 160% at 10% 0%, #0b1120, #020617);
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
          "Segoe UI", sans-serif;
        color: var(--text-main);
      }

      body {
        display: flex;
      }

      .app-shell {
        width: 100%;
        display: grid;
        grid-template-columns: 260px minmax(0, 1fr) 360px;
        gap: 18px;
        padding: 14px 18px 20px;
      }

      /* ------- cards gen√©ricos ------- */

      .card {
        background: radial-gradient(
            circle at 0 0,
            rgba(56, 189, 248, 0.08),
            transparent 40%
          ),
          radial-gradient(
            circle at 100% 100%,
            rgba(129, 140, 248, 0.08),
            transparent 45%
          ),
          rgba(15, 23, 42, 0.97);
        border-radius: 22px;
        border: 1px solid rgba(148, 163, 184, 0.18);
        box-shadow: 0 18px 60px rgba(15, 23, 42, 0.8);
        overflow: hidden;
        position: relative;
      }

      .card-header {
        padding: 14px 18px 6px;
        font-size: 13px;
        font-weight: 600;
        letter-spacing: 0.02em;
        text-transform: uppercase;
        color: var(--text-soft);
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .card-body {
        padding: 10px 18px 16px;
      }

      .pill {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        font-size: 12px;
        padding: 5px 10px;
        border-radius: 999px;
        border: 1px solid rgba(148, 163, 184, 0.45);
        background: linear-gradient(
          120deg,
          rgba(15, 23, 42, 0.9),
          rgba(15, 23, 42, 0.4)
        );
      }

      .pill-dot {
        width: 8px;
        height: 8px;
        border-radius: 999px;
        background: var(--accent);
        box-shadow: 0 0 12px rgba(34, 197, 94, 0.9);
      }

      /* ------- coluna da esquerda ------- */

      .sidebar-col {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .sidebar-card {
        padding-bottom: 10px;
      }

      .sidebar-title {
        font-size: 13px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        color: var(--text-soft);
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .sidebar-btn {
        font-size: 11px;
        padding: 4px 10px;
        border-radius: 999px;
        border: 1px solid rgba(148, 163, 184, 0.45);
        background: rgba(15, 23, 42, 0.7);
        color: var(--text-soft);
        cursor: pointer;
      }

      .sidebar-btn:hover {
        border-color: var(--accent);
        color: var(--accent);
      }

      .sidebar-list {
        margin-top: 10px;
        max-height: 260px;
        overflow-y: auto;
        font-size: 12px;
        padding-right: 6px;
      }

      .sidebar-item {
        padding: 6px 8px;
        border-radius: 10px;
        border: 1px solid transparent;
        cursor: pointer;
        color: var(--text-soft);
      }

      .sidebar-item:hover {
        border-color: rgba(148, 163, 184, 0.5);
        background: rgba(15, 23, 42, 0.9);
        color: var(--text-main);
      }

      /* ------- coluna central ------- */

      .center-col {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .top-bar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
        padding: 7px 4px 4px;
      }

      .session-label {
        font-size: 13px;
        color: var(--text-soft);
        display: flex;
        align-items: center;
        gap: 8px;
      }

      #session-dot {
        width: 9px;
        height: 9px;
        border-radius: 999px;
        background: var(--accent);
        box-shadow: 0 0 12px rgba(34, 197, 94, 0.9);
      }

      #ws-status-text {
        font-size: 12px;
        color: var(--text-soft);
      }

      .top-actions {
        display: flex;
        gap: 8px;
      }

      .chip-btn {
        border-radius: 999px;
        padding: 7px 13px;
        font-size: 12px;
        border: 1px solid rgba(148, 163, 184, 0.5);
        background: rgba(15, 23, 42, 0.9);
        color: var(--text-soft);
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        gap: 6px;
      }

      .chip-btn.primary {
        border-color: rgba(56, 189, 248, 0.8);
        background: radial-gradient(
          circle at 0 0,
          rgba(56, 189, 248, 0.2),
          rgba(15, 23, 42, 0.9)
        );
        color: #e0f2fe;
      }

      .chip-btn.danger {
        border-color: rgba(248, 113, 113, 0.8);
        color: #fecaca;
      }

      .chip-btn:hover {
        transform: translateY(-0.5px);
        box-shadow: 0 0 18px rgba(15, 23, 42, 0.9);
      }

      .chat-card {
        flex: 1;
        display: flex;
        flex-direction: column;
        padding-top: 4px;
      }

      .chat-messages {
        flex: 1;
        padding: 10px 18px 14px;
        overflow-y: auto;
      }

      .message {
        margin-bottom: 10px;
        max-width: 80%;
      }

      .message.system {
        max-width: 100%;
      }

      .message.user {
        margin-left: auto;
        text-align: right;
      }

      .message.orlem .msg-label {
        color: #a5b4fc;
      }

      .message.user .msg-label {
        color: #fbbf24;
      }

      .msg-label {
        font-size: 11px;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        margin-bottom: 2px;
        color: var(--text-soft);
      }

      .message > div:last-child {
        border-radius: 14px;
        padding: 8px 11px;
        font-size: 13px;
        line-height: 1.5;
        background: rgba(15, 23, 42, 0.95);
        border: 1px solid rgba(148, 163, 184, 0.35);
      }

      .message.user > div:last-child {
        background: radial-gradient(
          circle at 0 0,
          rgba(56, 189, 248, 0.3),
          rgba(15, 23, 42, 0.95)
        );
        border-color: rgba(56, 189, 248, 0.7);
      }

      .message.orlem > div:last-child {
        background: radial-gradient(
          circle at 100% 0,
          rgba(129, 140, 248, 0.32),
          rgba(15, 23, 42, 0.95)
        );
        border-color: rgba(129, 140, 248, 0.8);
      }

      .connection-status {
        font-size: 11px;
        color: var(--text-soft);
        opacity: 0.9;
        padding: 0 18px 6px;
      }

      .input-row {
        margin-top: 6px;
        padding: 0 18px 14px;
        display: grid;
        grid-template-columns: auto minmax(0, 1fr) auto;
        gap: 8px;
        align-items: center;
      }

      .mic-btn {
        width: 42px;
        height: 42px;
        border-radius: 999px;
        border: 1px solid rgba(148, 163, 184, 0.4);
        background: rgba(15, 23, 42, 0.95);
        color: var(--text-soft);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
      }

      .mic-btn.recording {
        border-color: #f97316;
        background: rgba(127, 29, 29, 0.96);
        color: #fee2e2;
        box-shadow: 0 0 0 1px rgba(248, 113, 113, 0.7);
      }

      #user-input {
        width: 100%;
        min-height: 42px;
        max-height: 90px;
        resize: vertical;
        border-radius: 999px;
        border: 1px solid rgba(148, 163, 184, 0.55);
        background: rgba(15, 23, 42, 0.96);
        padding: 9px 14px;
        font-size: 13px;
        color: var(--text-main);
        outline: none;
      }

      #user-input::placeholder {
        color: rgba(148, 163, 184, 0.9);
      }

      #send-btn {
        height: 42px;
        padding: 0 16px;
        border-radius: 999px;
        border: none;
        background: linear-gradient(135deg, #22c55e, #16a34a);
        color: #022c22;
        font-weight: 600;
        font-size: 13px;
        cursor: pointer;
        box-shadow: 0 14px 40px rgba(21, 128, 61, 0.5);
      }

      #send-btn:hover {
        filter: brightness(1.03);
      }

      .input-meta {
        padding: 0 18px 12px;
        font-size: 11px;
        color: var(--text-soft);
        display: flex;
        justify-content: space-between;
        gap: 8px;
      }

      .pill-small {
        border-radius: 999px;
        border: 1px solid rgba(148, 163, 184, 0.4);
        padding: 3px 8px;
      }

      /* ------- coluna direita (painel) ------- */

      .panel-col {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .panel-section {
        padding-bottom: 12px;
      }

      .panel-header {
        font-size: 13px;
        font-weight: 600;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding-bottom: 4px;
      }

      .panel-header span.count {
        font-size: 11px;
        color: var(--text-soft);
      }

      .panel-empty {
        font-size: 12px;
        color: var(--text-soft);
        padding: 6px 0 8px;
      }

      .panel-items {
        font-size: 12px;
        display: flex;
        flex-direction: column;
        gap: 6px;
      }

      .panel-item {
        border-radius: 12px;
        border: 1px solid rgba(148, 163, 184, 0.5);
        padding: 6px 9px;
        background: rgba(15, 23, 42, 0.95);
      }
    </style>
  </head>
  <body>
    <div class="app-shell">
      <!-- COLUNA ESQUERDA ‚Äî logs / reuni√µes -->
      <div class="sidebar-col">
        <div class="card sidebar-card">
          <div class="card-body">
            <div class="sidebar-title">
              <span>Reuni√µes salvas (JSONL)</span>
              <button id="btn-reload-logs" class="sidebar-btn">
                Recarregar logs
              </button>
            </div>
            <div id="logs-list" class="sidebar-list"></div>
          </div>
        </div>

        <div class="card sidebar-card">
          <div class="card-body">
            <div class="sidebar-title">
              <span>Reuni√µes (Banco)</span>
              <button id="btn-load-meetings" class="sidebar-btn">
                Carregar reuni√µes
              </button>
            </div>
            <div id="meetings-list" class="sidebar-list"></div>
          </div>
        </div>
      </div>

      <!-- COLUNA CENTRAL ‚Äî reuni√£o ao vivo -->
      <div class="center-col">
        <div class="card chat-card">
          <div class="top-bar">
            <div>
              <div class="session-label">
                <span id="session-dot"></span>
                <span id="ws-status-text">Conectando‚Ä¶</span>
              </div>
              <div id="session-label" class="session-label" style="margin-top:4px;">
                sess√£o ‚Äî ...
              </div>
            </div>

            <div class="top-actions">
              <button id="btn-summarize" class="chip-btn">
                ‚Ü∫ Resumo
              </button>
              <button id="btn-diarize" class="chip-btn">
                üë• Diarizar
              </button>
              <button id="btn-end" class="chip-btn danger">
                ‚èπ Encerrar
              </button>
            </div>
          </div>

          <div id="chat-messages" class="chat-messages"></div>

          <div id="connection-status" class="connection-status"></div>

          <div class="input-row">
            <button
              id="btn-mic"
              class="mic-btn"
              title="Clique para gravar/pausar √°udio para o Orlem"
            >
              üéô
            </button>

            <textarea
              id="user-input"
              placeholder="Digite ou fale com o Orlem como se ele fosse um s√≥cio na call‚Ä¶"
            ></textarea>

            <button id="send-btn">Enviar</button>
          </div>

          <div class="input-meta">
            <span class="pill-small">
              Dica: chame pelo nome ‚Äî ‚ÄúOrlem, o que voc√™ acha disso?‚Äù
            </span>
            <span>Enter para enviar</span>
          </div>
        </div>
      </div>

      <!-- COLUNA DIREITA ‚Äî painel da reuni√£o -->
      <div class="panel-col">
        <div class="card">
          <div class="card-body">
            <div class="panel-section">
              <div class="panel-header">
                <span>Resumo parcial</span>
                <span id="panel-summary-count" class="count">0 blocos</span>
              </div>
              <div id="panel-summary-empty" class="panel-empty">
                Ainda n√£o h√° resumo. Pe√ßa:
                <em>‚ÄúOrlem, faz um resumo r√°pido at√© agora.‚Äù</em>
              </div>
              <div id="panel-summary-items" class="panel-items"></div>
            </div>

            <div class="panel-section">
              <div class="panel-header">
                <span>Decis√µes</span>
                <span id="panel-decisions-count" class="count">0 itens</span>
              </div>
              <div id="panel-decisions-empty" class="panel-empty">
                Nenhuma decis√£o registrada ainda.
              </div>
              <div id="panel-decisions-items" class="panel-items"></div>
            </div>

            <div class="panel-section">
              <div class="panel-header">
                <span>Pr√≥ximos passos</span>
                <span id="panel-actions-count" class="count">0 tarefas</span>
              </div>
              <div id="panel-actions-empty" class="panel-empty">
                Sem pr√≥ximos passos ainda. Voc√™ pode pedir:
                <em>‚ÄúOrlem, transforma isso em tarefas.‚Äù</em>
              </div>
              <div id="panel-actions-items" class="panel-items"></div>
            </div>

            <div class="panel-section">
              <div class="panel-header">
                <span>Diariza√ß√£o</span>
                <span id="panel-diarize-count" class="count">0 blocos</span>
              </div>
              <div id="panel-diarize-empty" class="panel-empty">
                Quando quiser ver por falante, clique em ‚ÄúDiarizar‚Äù.
              </div>
              <div id="panel-diarize-items" class="panel-items"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="/web/client.js"></script>
  </body>
</html>
