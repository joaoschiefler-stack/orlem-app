<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <title>Orlem ‚Äî Assistente de Reuni√µes</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <style>
      :root {
        --bg-body: #020617;
        --bg-side: #020617;
        --bg-main: #020617;
        --bg-card: #020617;
        --bg-card-alt: #020617;
        --bg-input: #020617;
        --border-subtle: #1f2937;
        --accent: #4f46e5;
        --accent-soft: rgba(79, 70, 229, 0.12);
        --accent-red: #ef4444;
        --accent-green: #22c55e;
        --text-main: #e5e7eb;
        --text-soft: #9ca3af;
        --pill-bg: #020617;
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
        background: radial-gradient(circle at top, #020617 0, #020617 45%, #030712 100%);
        color: var(--text-main);
      }

      .app {
        display: flex;
        height: 100vh;
        overflow: hidden;
      }

      /* LADO ESQUERDO -------------------------------------------------- */
      .side {
        width: 280px;
        background: var(--bg-side);
        border-right: 1px solid var(--border-subtle);
        padding: 12px 12px 10px;
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .brand-row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 6px 4px 2px;
      }

      .brand {
        font-weight: 600;
        letter-spacing: 0.06em;
        font-size: 11px;
        text-transform: uppercase;
        color: var(--text-soft);
      }

      .side-title {
        font-size: 11px;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        color: var(--text-soft);
        margin-bottom: 4px;
      }

      .list-box {
        flex: 1;
        border-radius: 12px;
        border: 1px solid var(--border-subtle);
        background: radial-gradient(circle at top left, #020617 0, #020617 45%, #020617 100%);
        padding: 6px;
        display: flex;
        flex-direction: column;
        gap: 6px;
        min-height: 80px;
        overflow: hidden;
      }

      .list-scroll {
        flex: 1;
        overflow-y: auto;
        padding-right: 2px;
      }

      .pill-small {
        padding: 5px 9px;
        border-radius: 999px;
        font-size: 11px;
        border: 1px solid var(--border-subtle);
        background: #020617;
        color: var(--text-soft);
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        gap: 6px;
      }

      .pill-small:hover {
        border-color: #374151;
        background: #020617;
      }

      .logs-refresh {
        margin-top: 4px;
        display: flex;
        justify-content: center;
      }

      .log-item,
      .meeting-item {
        padding: 7px 9px;
        border-radius: 10px;
        font-size: 12px;
        border: 1px solid transparent;
        background: #020617;
        color: var(--text-soft);
        cursor: pointer;
        line-height: 1.3;
      }

      .log-item strong,
      .meeting-item strong {
        color: #e5e7eb;
        font-weight: 500;
      }

      .log-item:hover,
      .meeting-item:hover {
        border-color: #1d2635;
        background: #020617;
      }

      .log-item.active,
      .meeting-item.active {
        border-color: var(--accent);
        background: var(--accent-soft);
        color: #e5e7eb;
      }

      .meeting-meta {
        font-size: 11px;
        color: var(--text-soft);
        margin-top: 2px;
        opacity: 0.85;
      }

      /* MAIN ----------------------------------------------------------- */
      .main {
        flex: 1;
        display: flex;
        flex-direction: column;
        background: var(--bg-main);
      }

      header {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 10px 18px;
        border-bottom: 1px solid var(--border-subtle);
        background: linear-gradient(to right, #020617, #020617);
      }

      .pill {
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        background: var(--pill-bg);
        border: 1px solid var(--border-subtle);
        color: var(--text-soft);
        display: inline-flex;
        align-items: center;
        gap: 6px;
      }

      .pill .dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: #f97373;
      }

      .pill.online .dot {
        background: var(--accent-green);
      }

      .toolbar {
        margin-left: auto;
        display: flex;
        gap: 8px;
      }

      .btn {
        background: #020617;
        border: 1px solid var(--border-subtle);
        color: #e5e7eb;
        padding: 7px 14px;
        border-radius: 999px;
        font-size: 12px;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        gap: 6px;
        white-space: nowrap;
      }

      .btn span.icon {
        font-size: 14px;
      }

      .btn:hover {
        background: #020617;
        border-color: #374151;
      }

      .btn.primary {
        border-color: var(--accent);
        background: var(--accent-soft);
      }

      .btn.danger {
        border-color: #7f1d1d;
        background: rgba(248, 113, 113, 0.12);
      }

      .timeline {
        flex: 1;
        padding: 18px;
        overflow-y: auto;
      }

      .msg {
        padding: 10px 14px;
        border-radius: 14px;
        margin-bottom: 10px;
        max-width: 840px;
        border: 1px solid var(--border-subtle);
        background: #020617;
        font-size: 14px;
        line-height: 1.45;
      }

      .msg.user {
        margin-left: auto;
        background: radial-gradient(circle at top right, #020617 0, #020617 45%, #020617 100%);
        border-color: #1d283a;
      }

      .msg.bot {
        background: radial-gradient(circle at top left, #020617 0, #020617 45%, #020617 100%);
        border-color: #1b3a32;
      }

      .msg.system {
        font-style: italic;
        font-size: 13px;
        opacity: 0.9;
      }

      /* COMPOSER ------------------------------------------------------- */
      .composer {
        padding: 12px 18px 16px;
        border-top: 1px solid var(--border-subtle);
        background: linear-gradient(to right, #020617, #020617);
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .composer-inner {
        flex: 1;
        display: flex;
        align-items: center;
        gap: 10px;
        background: #020617;
        border-radius: 999px;
        border: 1px solid var(--border-subtle);
        padding: 6px 10px 6px 10px;
      }

      textarea#utterance {
        flex: 1;
        resize: none;
        background: transparent;
        border: none;
        outline: none;
        color: var(--text-main);
        font-size: 14px;
        padding: 6px 4px;
        height: 40px;
      }

      textarea#utterance::placeholder {
        color: var(--text-soft);
      }

      .mic-btn {
        width: 34px;
        height: 34px;
        border-radius: 50%;
        border: none;
        background: #020617;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        position: relative;
        flex-shrink: 0;
      }

      .mic-btn:hover {
        background: #020617;
      }

      .mic-btn.recording {
        outline: 2px solid var(--accent-red);
      }

      #mic-dot {
        position: absolute;
        top: 6px;
        right: 6px;
        width: 7px;
        height: 7px;
        border-radius: 50%;
        background: #4b5563;
      }

      #mic-dot.on {
        background: var(--accent-red);
      }

      .send-btn {
        border-radius: 999px;
        padding: 8px 18px;
        font-size: 13px;
        background: var(--accent);
        border: none;
        color: white;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        gap: 6px;
        flex-shrink: 0;
      }

      .send-btn:hover {
        filter: brightness(1.05);
      }

      @media (max-width: 900px) {
        .side {
          display: none;
        }
        .composer {
          padding-inline: 10px;
        }
      }
    </style>
  </head>
  <body>
    <div class="app">
      <!-- LADO ESQUERDO -->
      <aside class="side">
        <div class="brand-row">
          <div class="brand">ORLEM</div>
        </div>

        <!-- LOGS (JSONL) -->
        <div>
          <div class="side-title">REUNI√ïES SALVAS (.JSONL)</div>
          <div class="list-box">
            <div id="logs-list" class="list-scroll"></div>
            <div class="logs-refresh">
              <button id="refresh-logs" class="pill-small">
                ‚ü≥ Recarregar logs
              </button>
            </div>
          </div>
        </div>

        <!-- MEETINGS DB -->
        <div style="flex:1; display:flex; flex-direction:column; min-height:120px;">
          <div class="side-title">REUNI√ïES (DB)</div>
          <div class="list-box">
            <div id="meetings-list" class="list-scroll"></div>
            <div class="logs-refresh" style="justify-content:flex-start;">
              <span style="font-size:11px; color:var(--text-soft); opacity:.85;">
                Clique em qualquer item para abrir
              </span>
            </div>
          </div>
        </div>
      </aside>

      <!-- MAIN -->
      <section class="main">
        <header>
          <div id="ws-status" class="pill">
            <span class="dot"></span>
            desconectado
          </div>
          <div class="pill" id="current-session">log: ‚Äî</div>
          <div class="toolbar">
            <button id="summarize" class="btn">
              <span class="icon">üìÑ</span> Resumir
            </button>
            <button id="save" class="btn">
              <span class="icon">üíæ</span> Salvar
            </button>
            <button id="rename" class="btn">
              <span class="icon">‚úèÔ∏è</span> Renomear log
            </button>
            <button id="diarize" class="btn">
              <span class="icon">üéôÔ∏è</span> Diarizar
            </button>
            <button id="export" class="btn">
              <span class="icon">üì§</span> Exportar .jsonl
            </button>
            <button id="endMeeting" class="btn danger">
              <span class="icon">‚èπ</span> Encerrar (resumo)
            </button>
            <button id="loadMeetings" class="btn">
              <span class="icon">üìÅ</span> Reuni√µes (DB)
            </button>
          </div>
        </header>

        <div id="timeline" class="timeline"></div>

        <div class="composer">
          <div class="composer-inner">
            <button id="micBtn" class="mic-btn" type="button" title="Falar com o Orlem">
              <span id="mic-dot"></span>
              üéôÔ∏è
            </button>
            <textarea
              id="utterance"
              placeholder="Digite ou fale com o Orlem‚Ä¶"
            ></textarea>
          </div>
          <button id="sendBtn" class="send-btn" type="button">
            Enviar
          </button>
        </div>
      </section>
    </div>

    <!-- cache busting simples p/ garantir que o navegador pega a vers√£o nova -->
    <script src="/web/client.js?v=13"></script>
  </body>
</html>
